<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LL.的小窝</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="//cdnjs.loli.net/ajax/libs/mdui/0.4.3/css/mdui.min.css">
    <link rel="stylesheet" href="/media/css/post.css">
    <link rel="stylesheet" href="/media/live2d/css/live2d.css" />
    
</head>
<body class=" mdui-appbar-with-toolbar  mdui-theme-primary-pink mdui-theme-accent-pink">
<header class="mdui-toolbar mdui-color-pink mdui-appbar-fixed mdui-appbar-scroll-toolbar-hide" style="z-index: 1000">
    <a href="javascript:;" mdui-drawer="{target: '#left-drawer',overlay:true}" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
    <span class="mdui-typo-title">LL.的小窝</span>
    <div class="mdui-toolbar-spacer"></div>
<!--    <a href="javascript:history.go(0);" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
    <a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">more_vert</i></a>
</header>

<div class="mdui-drawer mdui-color-white mdui-drawer-full-height mdui-drawer-close" id="left-drawer">
    <ul class="mdui-list">
        <li class="mdui-subheader">菜单</li>
        
        <li class="mdui-list-item mdui-ripple">
            <a href="/" class="mdui-list-item-content">首页</a>
        </li>
        
        <li class="mdui-list-item mdui-ripple">
            <a href="/archives" class="mdui-list-item-content">归档</a>
        </li>
        
        <li class="mdui-list-item mdui-ripple">
            <a href="/tags" class="mdui-list-item-content">标签</a>
        </li>
        
        <li class="mdui-list-item mdui-ripple">
            <a href="/post/about" class="mdui-list-item-content">关于</a>
        </li>
        
    </ul>
</div>

<div id="content" class="site-content">
    <div id="primary" class="content-area">
        <main id="main" class="site-main" role="main">
            <article id="post-1270" class="post-1270 post type-post status-publish format-standard hentry category-90 category-129 tag-149">
                <header class="entry-header">
                    <h1 class="entry-title">灯泡！打牌！大炮！</h1>
                    <p class="entry-census">发布于 2021-07-02</p>
                    <hr>
                </header>
                <div class="neko">
                    <p>the shy告诉我dp联赛要一直考到状压，然后我想起来我dp一直不咋行，这可咋整<br>
<font size=6><strong>区间DP</strong></font></p>
<p><font size = 5>朴素模板O（n<sup>3</sup>）</font><br>
<img src="https://520cxy.github.io/post-images/1625291612126.png" alt="" loading="lazy"><br>
例题：<a href="https://vjudge.net/problem/51Nod-1021">石子合并easy</a></p>
<p><font size=5>题目变形，<strong>线性变环状</strong></font><br>
思路：环状以后合并区间的情况就可以从后往前合并，最后合并完成可能是1<sub>n,2</sub>n<sub>1,3</sub>n~2.....这种n个石子合并的情况。所以我们可以破环成链，将前n-1各元素也放到n后面构成一个线性的环状序列，在对这个序列dp即可<br>
例题：<a href="https://www.luogu.com.cn/problem/P1880">[NOI1995] 石子合并</a><br>
大体思路与原题差不多，就是处理的时候前缀和在n后要接上1，2，3...然后状态转移时，起点要一直枚举到2*n，最后取最值时，枚举起点i从1~n，取f[i][n+i-1]要<strong>取一圈</strong></p>
<p><font size=5>时间优化 <strong>四边形优化O(n<sup>2</sup>)</strong></font><br>
思路：在查找最优分割点的时候，我们浪费了大量时间。那么我们可以把最优分割点保存下来，在查找的时候利用保存的最优分割点来优化查找过程。<br>
四边形不等式优化：<br>
（1）功能：用来寻找，s[i][j](i~j的最优分割点）与其他分割点的关系<br>
（2）不等式内容：如果某东西满足a&lt;b&lt;=c&lt;d且f[a][c]+f[b][d]&lt;=f[a][d]+f[b][c],则说这个东西满足四边形不等式。简而言之：交叉小于包含！<br>
（3）结论关系：s[i][j-1]&lt;=s[i][j]&lt;=s[i+1][j]<br>
（4）证明过程：<br>
0.证明w满足四边形不等式，这里w是m的附属量，形如m[i,j]=opt{m[i,k]+m[k,j]+w[i,j]}，此时大多要先证明w满足条件才能进一步证明m满足条件<br>
1.证明m满足四边形不等式<br>
2.证明s[i,j-1]≤s[i,j]≤s[i+1,j]<br>
<img src="https://520cxy.github.io/post-images/1625270269425.png" alt="" loading="lazy"><br>
结论关系：s[i][j-1]&lt;=s[i][j]&lt;=s[i+1][j]<br>
<img src="https://520cxy.github.io/post-images/1625270776603.png" alt="" loading="lazy"><br>
<a href="https://blog.csdn.net/noiau/article/details/72514812">证明详解</a><br>
<img src="https://520cxy.github.io/post-images/1625282987592.png" alt="" loading="lazy"><br>
例题<a href="http://poj.org/problem?id=2955">Brackets</a><br>
如果两个括号匹配，那么它的状态就是<strong>该匹配成功的括号内的区间左右长度状态+2</strong>然后按照朴素方法做输出就行<br>
if(s[i] 与 s[j]匹配） dp[i][j] = d[[i+1][j-1] +2;<br>
dp[i][j] = max(dp[i][j],dp[i][k]+dp[k+1][j]);</p>
<p><a href="http://poj.org/problem?id=1651">Multiplication Puzzle</a><br>
因为最后都要删掉中间所有的数字，所以我们分隔一个个小区间删数字，合并区间求最小。那么我们的状态就是目前删掉的数字区间，但是我们分割的时候的意思是抽一个卡片出来，所以这个卡片不能在已经抽出的状态里面，所以dp[i][j]里面是不包含j卡片的！<br>
状态转移方程：dp[i][j]表示抽出第i~j-1张卡片时候的最小值<br>
dp[i][j] = min(dp[i][j],dp[i][k] + dp[k+1][j] +num[i-1]*num[k]*num[j]);</p>
<p>整数划分（四）<br>
（1）题意：给出两个整数 n , m ,要求在 n 中加入m - 1 个乘号，将n分成m段，求出这m段的最大乘积<br>
（2）思路：这里给的乘号是有限个，所以状态方程里必须包含使用乘号的个数，此外还要包含区间长度。所以怎么用二维dp实现包含m和n，我们可以用dp[i][j]表示在第1~i个字符里插入j个乘号的最大值。<br>
（3）状态转移方程 dp[i][j]表示在第1<sub>i个字符里插入j个乘号的最大值；用num[i][j]表示第i</sub>j个字符表示的数字；<br>
dp[i][j] = max(dp[i][j],dp[k][j-1]*num[k+1][i])</p>
<p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4632">Palindrome subsequence</a><br>
(1)题意：给你一个字符串，求出其最多的可构成的回文字串（不要求连续），注：这里不同的回文字串只要求位置不同即可视为不同，如：aaaaa 的最多回文子串数目是 31.</p>
<p>（2）思路：用dp[i][j]表示状态，表示i~j里最多的回文字串数目，假设现在我们要求dp[i][j]：</p>
<p>a.首先：由前一个状态知：dp[i][j] = dp[i+1][j]并上dp[i][j-1] （因为区间尽可能大而且状态要在dp[i][j]之前，而且回文子串不要求 连续），由容斥原理得：dp[i+1][j] U dp[i][j-1] = dp[i+1][j]+dp[i][j-1] - dp[i+1][j] n dp[i][j-1]= dp[i+1[j]+dp[i][j-1] - dp[i+1][j-1]<br>
注意：这是一个固定的状态，每一个状态都由这个公式推出初始状态，是必须的，不是可选择地<br>
b.其次：如果s[i] == s[j] ,那么两端单独就可以构成回文子序列，而且与dp[i+1][j],dp[i][j-1],dp[i+1][j-1]，中的回文序列又可以构成新的回文序列，所以此时dp[i][j] = dp[i+1][j] U dp[i][j-1] + dp[i+1][j-1] +1;而dp[i][j]已经更新为 dp[i+1][j] U dp[i][j-1]，所以dp[i][j] = dp[i][j] + dp[i+1][j-1] +1;<br>
(3)状态转移方程： dp[i][j]表示i~j内最多的回文字串数目<br>
dp[i][j] = dp[i+1][j]+dp[i][j-1] -dp[i+1][j-1] (容斥）<br>
if(s[i] == s[j]) dp[i][j] = dp[i][j] +dp[i+1][j-1] +1; （思维）<br>
注：这里因为容斥时有减法，所以要先加上模再取模，要不会出现负数！</p>
<p><font size=6><strong>背包DP</strong></font><br>
<font size=5>01背包</font><br>
该问题特点：<strong>每种物品只有一件，决策为放或不放</strong>，我们设子问题为<strong>状态f[i][j]表示前i件物品放到容量为j的背包中的最大价值</strong>，那么对于一件物品i，代价w[i],价值v[i],<br>
<img src="https://520cxy.github.io/post-images/1625281778957.png" alt="" loading="lazy"><br>
该方法为最朴素的算法<strong>O(VN)</strong><br>
<font size=4><strong>空间优化</strong></font><br>
先考虑上面讲的基本思路如何实现，肯定是有一个主循环i=1...N，每次算出来二维数组f[i][0...V]的所有值。那么，如果只用一个数组f[0...V]，能不能保证第i次循环结束后f[j]中表示的就是我们定义的状态f[i][j]呢？f[i][j]是由f[i−1][j]和f[i−1][j−w[i]]两个子问题递推而来，能否保证在推f[i][j]时（也即在第i次主循环中推f[j]时）能够得到f[i−1][j]和f[i−1][j−w[i]]的值呢？事实上，这要求<strong>在每次主循环中我们以j=V...0的顺序推f[j]，这样才能保证推f[j]时f[j−w[i]]保存的是状态f[i−1][j−w[i]]的值</strong>。至于为什么下面有详细解释。代码如下：<br>
<img src="https://520cxy.github.io/post-images/1625282679127.png" alt="" loading="lazy"><br>
其中的f[j]=max(f[j],f[j−w[i]])一句恰就相当于我们的转移方程f[i][j]=max(f[i−1][j],f[i−1][j−w[i]])，因为现在的f[j−w[i]]就相当于原来的f[i−1][j−w[i]]。如果将V的循环顺序从上面的逆序改成顺序的话，那么则成了f[i][j]由f[i][j−w[i]]推知，与本题意不符，但它却是另一个重要的背包问题（完全背包）最简捷的解决方案，故学习只用一维数组解01背包问题是十分必要的。<br>
事实上，使用一维数组解01背包的程序在后面会被多次用到，以后的代码中就直接调用不再加以说明。<br>
<img src="https://520cxy.github.io/post-images/1625282638813.png" alt="" loading="lazy"><br>
注意这个过程里的处理与前面给出的代码有所不同。前面的示例程序写成j=V...0是为了在程序中体现每个状态都按照方程求解了，避免不必要的思维复杂度。而这里既然已经抽象成看作黑箱的过程了，就可以加入优化。费用为w[i]的物品不会影响状态f[0...j−1]，这是显然的。</p>
<p><font size=5>完全背包</font><br>
该问题特点：<strong>每个物品都可以无限用</strong><br>
基本思路：<br>
这个问题非常类似于01背包问题，所不同的是每种物品有无限件。也就是从每种物品的角度考虑，与它相关的策略已并非取或不取两种，而是有取0件、取1件、取2件……等很多种。如果仍然按照解01背包时的思路，用f[i][j]表示前i种物品恰放入一个容量为V的背包的最大权值。仍然可以按照每种物品不同的策略写出状态转移方程，像这样：<br>
f[i][j] = max(f[i-1][j], f[i-1][j-k<em>w[i]]+k</em>v[i])，k为该物品取了多少件<br>
这跟01背包问题一样有O(VN)个状态需要求解，但求解每个状态的时间已经不是常数了，求解状态f[i][j]的时间是O(V/w[i])，总的复杂度可以认为是O(N∗Σ(V/w[i]))，是比较大的。将01背包问题的基本思路加以改进，得到了这样一个清晰的方法。这说明01背包问题的方程的确是很重要，可以推及其它类型的背包问题。但我们还是试图改进这个复杂度。<br>
<font size=4><strong>O(VN)的算法</strong></font><br>
<img src="https://520cxy.github.io/post-images/1625450345723.png" alt="" loading="lazy"><br>
细心的dalao会发现，这个代码与01背包的代码只有j的循环次序不同而已。为什么这样一改就可行呢？首先想想为什么01背包中要按照j=V...0的逆序来循环。这是因为要保证第i次循环中的状态f[i][j]是由状态f[i−1][j−w[i]]递推而来。换句话说，这<strong>正是为了保证每件物品只选一次</strong>，保证在考虑“选入第i件物品”这件策略时，依据的是一个绝无已经选入第i件物品的子结果f[i−1][j−w[i]]。而现在完全背包的特点恰是每种物品可选无限件**，所以在考虑“加选一件第i种物品”这种策略时，却正需要一个可能已选入第i种物品的子结果f[i][j−w[i]]**，所以就可以并且必须采用j=0...V的顺序循环。这就是这个简单的程序为何成立的道理。值得一提的是，上面的伪代码中两层for循环的次序可以颠倒。这个结论有可能会带来算法时间常数上的优化。</p>

                </div>
            </article>
        </main>
    </div>
    <div class="doc-footer-nav mdui-color-theme">
        <div class="mdui-container">
            <div class="mdui-row">
                
                <a href="https://520cxy.github.io/post/chu-sai-nocuo-ti/" class="mdui-ripple mdui-color-theme mdui-col-xs-2 mdui-col-sm-6 doc-footer-nav-left">
                    <div class="doc-footer-nav-text">
                        <i class="mdui-icon material-icons">arrow_back</i>
                        <span class="doc-footer-nav-direction mdui-hidden-xs-down">上一篇文章</span>
                        <div class="doc-footer-nav-chapter mdui-hidden-xs-down">初赛の错题</div>
                    </div>
                </a>
                
                
                <a href="https://520cxy.github.io/post/gou-zai-tui/" class="mdui-ripple mdui-color-theme mdui-col-xs-10 mdui-col-sm-6 doc-footer-nav-right">
                    <div class="doc-footer-nav-text">
                        <i class="mdui-icon material-icons">arrow_forward</i>
                        <span class="doc-footer-nav-direction">下一篇文章</span>
                        <div class="doc-footer-nav-chapter">狗崽腿</div>
                    </div>
                </a>
                
            </div>
        </div>
    </div>
    <br>
    
    <div class="comment"></div>
</div>
<footer class="mdui-container footer ">
    <div class="head_card-offset"></div>
    <div class="mdui-row mdui-row-gapless">
        <div class="k-container">
            <img width="100%" src="/media/img/skirt.png">
        </div>
    </div>

    <div class="site-info">
        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
</footer>
<div id="landlord" style="left:5px;bottom:0px;">
    <div class="message" style="opacity:0"></div>
    <canvas id="live2d" width="500" height="560" class="live2d"></canvas>
    <div class="live_talk_input_body">
        <div class="live_talk_input_name_body">
            <input name="name" type="text" class="live_talk_name white_input" id="AIuserName" autocomplete="off" placeholder="你的名字" />
        </div>
        <div class="live_talk_input_text_body">
            <input name="talk" type="text" class="live_talk_talk white_input" id="AIuserText" autocomplete="off" placeholder="要和我聊什么呀？"/>
            <button type="button" class="live_talk_send_btn" id="talk_send">发送</button>
        </div>
    </div>
    <input name="live_talk" id="live_talk" value="1" type="hidden" />
    <div class="live_ico_box">
        <div class="live_ico_item type_info" id="showInfoBtn"></div>
        <div class="live_ico_item type_talk" id="showTalkBtn"></div>
        <div class="live_ico_item type_music" id="musicButton"></div>
        <div class="live_ico_item type_youdu" id="youduButton"></div>
        <div class="live_ico_item type_quit" id="hideButton"></div>
        <input name="live_statu_val" id="live_statu_val" value="0" type="hidden" />
        <audio src="" style="display:none;" id="live2d_bgm" data-bgm="0" preload="none"></audio>
        <input name="live2dBGM" value="https://sharefs.yun.kugou.com/202104041835/0fb2795cd3cb3e87e1511333db5f7e17/KGTX/CLTX001/93e5417585b2c222df979cc00e9a1b8a.mp3" type="hidden">

        <input id="duType" value="douqilai,l2d_caihong" type="hidden">
    </div>
</div>
<div id="open_live2d">召唤伊斯特瓦尔</div>
<script>
    var message_Path = '/media/live2d/';//资源目录，如果目录不对请更改
    var talkAPI = "";//如果有类似图灵机器人的聊天接口请填写接口路径
</script>
<!--<script src="/media/js/jquery-3.3.1.min.js"></script>-->
<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="/media/live2d/js/live2d.js"></script>
<script type="text/javascript" src="/media/live2d/js/message.js"></script>
<script type="text/javascript">
	function clickEffect() {
		let balls = [];
		let longPressed = false;
		let longPress;
		let multiplier = 0;
		let width, height;
		let origin;
		let normal;
		let ctx;
		const colours = ["#F73859", "#14FFEC", "#00E0FF", "#FF99FE", "#FAF15D"];
		const canvas = document.createElement("canvas");
		document.body.appendChild(canvas);
		canvas.setAttribute("style", "width: 100%; height: 100%; top: 0; left: 0; z-index: 99999; position: fixed; pointer-events: none;");
		const pointer = document.createElement("span");
		pointer.classList.add("pointer");
		document.body.appendChild(pointer);
	
		if (canvas.getContext && window.addEventListener) {
			ctx = canvas.getContext("2d");
			updateSize();
			window.addEventListener('resize', updateSize, false);
			loop();
			window.addEventListener("mousedown", function(e) {
				pushBalls(randBetween(10, 20), e.clientX, e.clientY);
				document.body.classList.add("is-pressed");
				longPress = setTimeout(function() {
					document.body.classList.add("is-longpress");
					longPressed = true;
				}, 500);
			}, false);
			window.addEventListener("mouseup", function(e) {
				clearInterval(longPress);
				if (longPressed == true) {
					document.body.classList.remove("is-longpress");
					pushBalls(randBetween(50 + Math.ceil(multiplier), 100 + Math.ceil(multiplier)), e.clientX, e.clientY);
					longPressed = false;
				}
				document.body.classList.remove("is-pressed");
			}, false);
			window.addEventListener("mousemove", function(e) {
				let x = e.clientX;
				let y = e.clientY;
				pointer.style.top = y + "px";
				pointer.style.left = x + "px";
			}, false);
		} else {
			console.log("canvas or addEventListener is unsupported!");
		}
	
	
		function updateSize() {
			canvas.width = window.innerWidth * 2;
			canvas.height = window.innerHeight * 2;
			canvas.style.width = window.innerWidth + 'px';
			canvas.style.height = window.innerHeight + 'px';
			ctx.scale(2, 2);
			width = (canvas.width = window.innerWidth);
			height = (canvas.height = window.innerHeight);
			origin = {
				x: width / 2,
				y: height / 2
			};
			normal = {
				x: width / 2,
				y: height / 2
			};
		}
		class Ball {
			constructor(x = origin.x, y = origin.y) {
				this.x = x;
				this.y = y;
				this.angle = Math.PI * 2 * Math.random();
				if (longPressed == true) {
					this.multiplier = randBetween(14 + multiplier, 15 + multiplier);
				} else {
					this.multiplier = randBetween(6, 12);
				}
				this.vx = (this.multiplier + Math.random() * 0.5) * Math.cos(this.angle);
				this.vy = (this.multiplier + Math.random() * 0.5) * Math.sin(this.angle);
				this.r = randBetween(8, 12) + 3 * Math.random();
				this.color = colours[Math.floor(Math.random() * colours.length)];
			}
			update() {
				this.x += this.vx - normal.x;
				this.y += this.vy - normal.y;
				normal.x = -2 / window.innerWidth * Math.sin(this.angle);
				normal.y = -2 / window.innerHeight * Math.cos(this.angle);
				this.r -= 0.3;
				this.vx *= 0.9;
				this.vy *= 0.9;
			}
		}
	
		function pushBalls(count = 1, x = origin.x, y = origin.y) {
			for (let i = 0; i < count; i++) {
				balls.push(new Ball(x, y));
			}
		}
	
		function randBetween(min, max) {
			return Math.floor(Math.random() * max) + min;
		}
	
		function loop() {
			ctx.fillStyle = "rgba(255, 255, 255, 0)";
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			for (let i = 0; i < balls.length; i++) {
				let b = balls[i];
				if (b.r < 0) continue;
				ctx.fillStyle = b.color;
				ctx.beginPath();
				ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2, false);
				ctx.fill();
				b.update();
			}
			if (longPressed == true) {
				multiplier += 0.2;
			} else if (!longPressed && multiplier >= 0) {
				multiplier -= 0.4;
			}
			removeBall();
			requestAnimationFrame(loop);
		}
	
		function removeBall() {
			for (let i = 0; i < balls.length; i++) {
				let b = balls[i];
				if (b.x + b.r < 0 || b.x - b.r > width || b.y + b.r < 0 || b.y - b.r > height || b.r < 0) {
					balls.splice(i, 1);
				}
			}
		}
	}
	clickEffect();//调用
	</script>
</body>
<script src="//cdnjs.loli.net/ajax/libs/mdui/0.4.3/js/mdui.min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    $('.comment').bind('DOMNodeInserted',()=>{
        $('.comment').unbind()

        $('.vbtn').addClass(' mdui-btn mdui-color-theme-accent mdui-ripple')
    })

    let valine = new Valine({
        el: '.comment',
        
        
        
        path: window.location.pathname,
        pageSize: 30,
        avatar:'mm',
        notify:true
    })
</script>
</html>
